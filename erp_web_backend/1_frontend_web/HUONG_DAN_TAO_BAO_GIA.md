# Hฦฐแปng dแบซn tแบกo bรกo giรก ฤแบงu tiรชn

## Bฦฐแปc 1: Tแบกo dแปฑ รกn (nแบฟu chฦฐa cรณ)

1. Mแป trang Dashboard (trang chแปง)
2. Trong phแบงn "Dแปฑ รกn (Firestore)", nhแบฅp vรo nรบt **"Tแบกo dแปฑ รกn"**
3. Nhแบญp tรชn dแปฑ รกn (vรญ dแปฅ: "Dแปฑ รกn ABC")
4. Nhแบฅp **"Tแบกo"**

## Bฦฐแปc 2: Tแบกo bรกo giรก

Cรณ 3 cรกch ฤแป tแบกo bรกo giรก:

### Cรกch 1: Tแปซ nรบt "Tแบกo bรกo giรก" แป ฤแบงu trang
1. Nhแบฅp vรo nรบt **"Tแบกo bรกo giรก"** แป gรณc trรชn bรชn phแบฃi
2. Nแบฟu bแบกn chแป cรณ 1 dแปฑ รกn, hแป thแปng sแบฝ tแปฑ ฤแปng chuyแปn ฤแบฟn trang bรกo giรก
3. Nแบฟu bแบกn cรณ nhiแปu dแปฑ รกn, mแปt cแปญa sแป sแบฝ hiแปn ra ฤแป bแบกn chแปn dแปฑ รกn
4. Chแปn dแปฑ รกn vร nhแบฅp **"Tแบกo bรกo giรก"**

### Cรกch 2: Tแปซ danh sรกch dแปฑ รกn
1. Trong phแบงn "Dแปฑ รกn (Firestore)", tรฌm dแปฑ รกn bแบกn muแปn tแบกo bรกo giรก
2. Nhแบฅp vรo nรบt **"Bรกo giรก"** bรชn cแบกnh tรชn dแปฑ รกn
3. Hoแบทc nhแบฅp trแปฑc tiแบฟp vรo **tรชn dแปฑ รกn** (cรณ gแบกch chรขn)

### Cรกch 3: Truy cแบญp trแปฑc tiแบฟp qua URL
Nแบฟu bแบกn biแบฟt ID cแปงa dแปฑ รกn, bแบกn cรณ thแป truy cแบญp trแปฑc tiแบฟp:
```
/projects/{projectId}/quotation
```

## Bฦฐแปc 3: Nhแบญp vแบญt tฦฐ tแปซ Google Drive

1. Trรชn trang bรกo giรก, nhแบฅp vรo nรบt **"๐ฅ Tแปซ Google Drive nhแบญp"**
2. **Lฦฐu รฝ**: Bแบกn cแบงn ฤฤng nhแบญp Google trฦฐแปc (nแบฟu chฦฐa ฤฤng nhแบญp, hแป thแปng sแบฝ yรชu cแบงu)
3. Hแป thแปng sแบฝ tรฌm file Excel trong:
   - Thฦฐ mแปฅc dแปฑ รกn โ thฦฐ mแปฅc con "Thแปng kรช vแบญt tฦฐ" (nแบฟu cรณ)
   - Hoแบทc toรn bแป Google Drive cแปงa bแบกn
4. Chแปn file Excel chแปฉa danh sรกch vแบญt tฦฐ
5. Hแป thแปng sแบฝ tแปฑ ฤแปng xแปญ lรฝ vร hiแปn thแป bแบฃng vแบญt tฦฐ

## Bฦฐแปc 4: Chแปnh sแปญa giรก vแบญt tฦฐ

1. Trong bแบฃng vแบญt tฦฐ, bแบกn cรณ thแป:
   - **Chแปn vแบญt tฦฐ**: Tรญch vรo checkbox bรชn trรกi
   - **Nhแบญp giรก**: Nhแบญp ฤฦกn giรก vรo cแปt "ฤฦกn giรก"
   - **Xem tแปng tiแปn**: Tแปng tiแปn sแบฝ tแปฑ ฤแปng tรญnh toรกn

2. **รp dแปฅng giรก hรng loแบกt**:
   - Chแปn nhiแปu vแบญt tฦฐ bแบฑng checkbox
   - Nhแบฅp **"รp dแปฅng giรก"**
   - Nhแบญp giรก muแปn รกp dแปฅng
   - Nhแบฅp **"รp dแปฅng"**

## Bฦฐแปc 5: Hoรn thiแปn bรกo giรก

1. Sau khi chแปnh sแปญa xong, nhแบฅp **"Tiแบฟp tแปฅc hoรn thiแปn bรกo giรก โ"**
2. Trรชn trang hoรn thiแปn, bแบกn cรณ thแป:
   - Xem thรดng tin khรกch hรng
   - Chแปnh sแปญa sแป bรกo giรก, ngรy bรกo giรก
   - ฤแบทt thแปi gian hiแปu lแปฑc vร thแปi gian giao hรng
   - ฤแบทt phแบงn trฤm giแบฃm giรก (nแบฟu cรณ)
   - ฤแบทt phแบงn trฤm VAT (mแบทc ฤแปnh 10%)
   - Xem tแปng tiแปn vร tแปng tiแปn bแบฑng chแปฏ

3. Nhแบฅp **"Tแบกo Excel vร PDF"**
   - Hแป thแปng sแบฝ tแบกo file Excel vร PDF
   - Sau khi tแบกo xong, bแบกn cรณ thแป tแบฃi vแป bแบฑng nรบt **"Tแบฃi Excel"** hoแบทc **"Tแบฃi PDF"**

## Lฦฐu รฝ quan trแปng

### Vแป Google Drive:
- Bแบกn cแบงn ฤฤng nhแบญp Google ฤแป sแปญ dแปฅng tรญnh nฤng nhแบญp tแปซ Google Drive
- File Excel cแบงn cรณ ฤแปnh dแบกng ฤรบng vแปi cรกc cแปt: STT, Tรชn vแบญt tฦฐ, Vแบญt liแปu, SL (sแป lฦฐแปฃng), KL (khแปi lฦฐแปฃng), ฤVT (ฤฦกn vแป tรญnh), ฤฦกn giรก

### Vแป dแปฑ รกn:
- Mแปi bรกo giรก phแบฃi gแบฏn vแปi mแปt dแปฑ รกn
- Nแบฟu chฦฐa cรณ dแปฑ รกn, bแบกn phแบฃi tแบกo dแปฑ รกn trฦฐแปc

### Vแป Cloud Functions:
- Tรญnh nฤng tแบกo Excel/PDF cแบงn Cloud Functions ฤรฃ ฤฦฐแปฃc triแปn khai
- ฤแบฃm bแบฃo cรกc functions sau ฤรฃ ฤฦฐแปฃc deploy:
  - `generateExcelQuotation` (region: asia-southeast1)
  - `exportSheetToPdf` (region: us-central1)
  - `importMaterialsFromDrive`

## Khแบฏc phแปฅc sแปฑ cแป

### Khรดng thแบฅy gรฌ khi nhแบฅp "Tแบกo bรกo giรก"?
- Kiแปm tra xem bแบกn ฤรฃ tแบกo dแปฑ รกn chฦฐa
- Nแบฟu chฦฐa cรณ dแปฑ รกn, hแป thแปng sแบฝ yรชu cแบงu bแบกn tแบกo dแปฑ รกn trฦฐแปc

### Khรดng thแป nhแบญp tแปซ Google Drive?
- ฤแบฃm bแบฃo bแบกn ฤรฃ ฤฤng nhแบญp Google
- Kiแปm tra quyแปn truy cแบญp Google Drive
- ฤแบฃm bแบฃo file Excel cรณ ฤแปnh dแบกng ฤรบng

### Khรดng thแป tแบกo Excel/PDF?
- Kiแปm tra Cloud Functions ฤรฃ ฤฦฐแปฃc deploy chฦฐa
- Kiแปm tra console ฤแป xem lแปi cแปฅ thแป
- ฤแบฃm bแบฃo bแบกn ฤรฃ ฤฤng nhแบญp vร cรณ quyแปn truy cแบญp

## Cแบงn hแป trแปฃ?

Nแบฟu gแบทp vแบฅn ฤแป, vui lรฒng:
1. Kiแปm tra console cแปงa trรฌnh duyแปt (F12) ฤแป xem lแปi
2. Kiแปm tra Cloud Functions logs
3. Liรชn hแป ฤแปi phรกt triแปn







